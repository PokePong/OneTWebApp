@using System.Text.Json.Serialization
@using OneTWebApp.Client.Models
@using MudBlazor
@using OneTWebApp.Client.Utils

@inject HttpClient _httpClient

<MudStack Row="true"
          AlignItems="AlignItems.Center"
          Justify="Justify.SpaceBetween">
    <MudAvatar Style="height:50px; width:50px; font-size:1.5rem;"
               Class="p-2"
               Color="Color.Primary"
               Variant="Variant.Outlined">
        <MudImage Src="@(ImageUtils.GetIconAppPath(AppModel.AppType))"></MudImage>
    </MudAvatar>
    <MudButton Color="Color.Primary"
               Variant="Variant.Filled"
               Size="Size.Small"
               StartIcon="@Icons.Material.Filled.AddCircleOutline"
               OnClick="@(async () => await OnCreateInstanceAsync())">
        Add new instance
    </MudButton>
</MudStack>


@code {
    [Parameter] public AppModel AppModel { get; set; }


    private async Task OnCreateInstanceAsync() {
        Console.WriteLine("A");
        Console.WriteLine(_httpClient.BaseAddress);
        var res = await _httpClient.GetAsync("api/instance");
        Console.WriteLine(await res.Content.ReadAsStringAsync());
        Console.WriteLine("B");
    }

}